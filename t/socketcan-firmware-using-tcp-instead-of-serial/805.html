<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>socketCAN firmware using TCP instead of serial - Carloop Community</title>
    <meta name="description" content="Has anyone forked the socketCan particle firmware to use TCP server/client instead of just serial? 
I’m trying to use the can utils with my photon, but I don’t want to do it via serial port.  I would prefer to do it via &amp;hellip;">
    <meta name="generator" content="Discourse 3.3.0.beta1-dev - https://github.com/discourse/discourse version e84d462e2804bde1e49fae2c55eecd329dc73dc0">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/5d0dc9f48a4fa5171a3a95c8befa000d9f0fe88b_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/1X/f03d9faa7e5bd5b8a589b4ee5784e6678991578a_2_180x180.png">
<meta name="theme-color" media="all" content="#ffffff">

<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="805.html">

<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Carloop Community Search">

    <link href="../../stylesheets/color_definitions_base__1_c9899b2a42d6bd619c29b433a9ef7a3953a01da1.css?__ws=community.carloop.io" media="all" rel="stylesheet" class="light-scheme">

  <link href="../../stylesheets/desktop_7659a6af5bea9aaa0d00bcc5111c495874284faf.css?__ws=community.carloop.io" media="all" rel="stylesheet" data-target="desktop">



  <link href="../../stylesheets/chat_7659a6af5bea9aaa0d00bcc5111c495874284faf.css?__ws=community.carloop.io" media="all" rel="stylesheet" data-target="chat">
  <link href="../../stylesheets/checklist_7659a6af5bea9aaa0d00bcc5111c495874284faf.css?__ws=community.carloop.io" media="all" rel="stylesheet" data-target="checklist">
  <link href="../../stylesheets/discourse-details_7659a6af5bea9aaa0d00bcc5111c495874284faf.css?__ws=community.carloop.io" media="all" rel="stylesheet" data-target="discourse-details">
  <link href="../../stylesheets/discourse-lazy-videos_7659a6af5bea9aaa0d00bcc5111c495874284faf.css?__ws=community.carloop.io" media="all" rel="stylesheet" data-target="discourse-lazy-videos">
  <link href="../../stylesheets/discourse-local-dates_7659a6af5bea9aaa0d00bcc5111c495874284faf.css?__ws=community.carloop.io" media="all" rel="stylesheet" data-target="discourse-local-dates">
  <link href="../../stylesheets/discourse-narrative-bot_7659a6af5bea9aaa0d00bcc5111c495874284faf.css?__ws=community.carloop.io" media="all" rel="stylesheet" data-target="discourse-narrative-bot">
  <link href="../../stylesheets/discourse-presence_7659a6af5bea9aaa0d00bcc5111c495874284faf.css?__ws=community.carloop.io" media="all" rel="stylesheet" data-target="discourse-presence">
  <link href="../../stylesheets/docker_manager_7659a6af5bea9aaa0d00bcc5111c495874284faf.css?__ws=community.carloop.io" media="all" rel="stylesheet" data-target="docker_manager">
  <link href="../../stylesheets/footnote_7659a6af5bea9aaa0d00bcc5111c495874284faf.css?__ws=community.carloop.io" media="all" rel="stylesheet" data-target="footnote">
  <link href="../../stylesheets/poll_7659a6af5bea9aaa0d00bcc5111c495874284faf.css?__ws=community.carloop.io" media="all" rel="stylesheet" data-target="poll">
  <link href="../../stylesheets/spoiler-alert_7659a6af5bea9aaa0d00bcc5111c495874284faf.css?__ws=community.carloop.io" media="all" rel="stylesheet" data-target="spoiler-alert">
  <link href="../../stylesheets/chat_desktop_7659a6af5bea9aaa0d00bcc5111c495874284faf.css?__ws=community.carloop.io" media="all" rel="stylesheet" data-target="chat_desktop">
  <link href="../../stylesheets/poll_desktop_7659a6af5bea9aaa0d00bcc5111c495874284faf.css?__ws=community.carloop.io" media="all" rel="stylesheet" data-target="poll_desktop">

  <link href="../../stylesheets/desktop_theme_1_68ec8432d72346d143d3760e6bc02ea5b1bbe8ac.css?__ws=community.carloop.io" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="1" data-theme-name="with top headers">

    
    <meta id="data-ga-universal-analytics" data-tracking-code="UA-75724305-1" data-json="{&quot;cookieDomain&quot;:&quot;auto&quot;}" data-auto-link-domains="">

  <link rel="preload" href="../../assets/google-universal-analytics-v3-08add7ec997ab472fcd9f821d32ff7caf4b8b9a5de2ec18ca723a040be07a098.js" as="script" data-discourse-entrypoint="google-universal-analytics-v3" nonce="Zp8kr9jatBGaujndkjS7PH4yS">
<script defer="" src="../../assets/google-universal-analytics-v3-08add7ec997ab472fcd9f821d32ff7caf4b8b9a5de2ec18ca723a040be07a098.js" data-discourse-entrypoint="google-universal-analytics-v3" nonce="Zp8kr9jatBGaujndkjS7PH4yS"></script>


        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;socketCAN firmware using TCP instead of serial&#39;" href="805.rss">
    <meta property="og:site_name" content="Carloop Community">
<meta property="og:type" content="website">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="/uploads/default/original/1X/f03d9faa7e5bd5b8a589b4ee5784e6678991578a.png">
<meta property="og:image" content="/uploads/default/original/1X/f03d9faa7e5bd5b8a589b4ee5784e6678991578a.png">
<meta property="og:url" content="/t/socketcan-firmware-using-tcp-instead-of-serial/805">
<meta name="twitter:url" content="/t/socketcan-firmware-using-tcp-instead-of-serial/805">
<meta property="og:title" content="socketCAN firmware using TCP instead of serial">
<meta name="twitter:title" content="socketCAN firmware using TCP instead of serial">
<meta property="og:description" content="Has anyone forked the socketCan particle firmware to use TCP server/client instead of just serial?  I’m trying to use the can utils with my photon, but I don’t want to do it via serial port.  I would prefer to do it via TCP socket.  I say this because I only have a Mac and it seems the can-utils is not supported.  Instead I’m doing my work on a linux server I have inside my house. I’ve got the socketCAN firmware updated to support TCP server client that I believe is working. Specifically, I have...">
<meta name="twitter:description" content="Has anyone forked the socketCan particle firmware to use TCP server/client instead of just serial?  I’m trying to use the can utils with my photon, but I don’t want to do it via serial port.  I would prefer to do it via TCP socket.  I say this because I only have a Mac and it seems the can-utils is not supported.  Instead I’m doing my work on a linux server I have inside my house. I’ve got the socketCAN firmware updated to support TCP server client that I believe is working. Specifically, I have...">
<meta property="article:published_time" content="2019-01-12T22:19:09+00:00">
<meta property="og:ignore_canonical" content="true">


    
  </head>
  <body class="crawler ">
    <div id="top-navbar" class="container">
<span id="top-navbar-links" style="display:none;">
  <a href="https://www.carloop.io" class="dow-menu" id="home"><span id="home-text">Home</span>
  <i class="fa fa-home" aria-hidden="true"></i></a>  
  <a href="https://carloop.readme.io/" class="dow-menu" id="docs">Documentation</a> 
</span>
</div>
    <header>
  <a href="../../index.htm">
    Carloop Community
  </a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="805.html">socketCAN firmware using TCP instead of serial</a>
    </h1>


  </div>

  

    <div itemscope="" itemtype='http://schema.org/DiscussionForumPosting'>
      <meta itemprop='headline' content='socketCAN firmware using TCP instead of serial'>
      <link itemprop='url' href='805.html'>
      <meta itemprop='datePublished' content='2019-01-12T22:19:08Z'>
        <meta itemprop='articleSection' content='General Car Talk'>
      <meta itemprop='keywords' content=''>
      <div itemprop='publisher' itemscope="" itemtype="http://schema.org/Organization">
        <meta itemprop='name' content='Carloop Community'>
          <div itemprop='logo' itemscope="" itemtype="http://schema.org/ImageObject">
            <meta itemprop='url' content='/uploads/default/original/1X/1c11e9182b98c202a382d6f5862b4cc22c18a478.png'>
          </div>
      </div>


          <div id='post_1' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" href='../../u/hartmms.html'><span itemprop='name'>hartmms</span></a>
                
              </span>

                <link itemprop="mainEntityOfPage" href="805.html">


              <span class="crawler-post-infos">
                  <time datetime='2019-01-12T22:19:09Z' class='post-time'>
                    January 12, 2019, 10:19pm
                  </time>
                  <meta itemprop='dateModified' content='2019-01-12T22:19:09Z'>
              <span itemprop='position'>1</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Has anyone forked the socketCan particle firmware to use TCP server/client instead of just serial?</p>
<p>I’m trying to use the can utils with my photon, but I don’t want to do it via serial port.  I would prefer to do it via TCP socket.  I say this because I only have a Mac and it seems the can-utils is not supported.  Instead I’m doing my work on a linux server I have inside my house. I’ve got the socketCAN firmware updated to support TCP server client that I believe is working. Specifically, I have a 2nd firmware version that does not do socketCAN, but just a pure CAN implementation that is a one way device: it sends all CAN messages seen over the TCP connection to a listening client.</p>
<p>I believe my blocking issue is somewhere on the client side. socketCAN uses UNIX sockets, not TCP sockets.  To fix this, I’m using “socat UNIX_LISTEN:/tmp/socket-can,fork TCP::”  to create a local machine socket that is hooked to the TCP socket of the photon server.  Running “nc -U /tmp/socket-can” shows me all the CAN traffic, so that works.</p>
<p>However, when I do “candump /tmp/socket-can” I get the message “SIOCGIFINDEX: No such device”.  Hmm. Carloop socketCAN docs say for the serial method, one must run slcand to create the proper unix device, so I run “slcand -o -c -s 4 /tmp/socket-can can0” but I don’t think that worked because “ip addr” shows no can0 device.  I’m not sure what’s wrong here.</p>
<p>My top level goal is to be able to run cansniffer to help me filter out a lot of noise on the CAN IHS bus so I can figure out what the unlock and lock codes are for my 2018 ram 2500.  I’m also hoping the remote start/stop can be triggered over this bus with the right message.</p>
<p>I thought about forking the cansniffer code to add support for a TCP socket, but my C coding skills are quite old (damn you pointers) and I’m not sure I can hack it without getting lost in the code.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction">
              <meta itemprop="userInteractionCount" content="0">
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction">
                <meta itemprop="userInteractionCount" content="0">
              </div>

          </div>
          <div id='post_2' itemprop='comment' itemscope="" itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" href='../../u/cyclin_al1.html'><span itemprop='name'>cyclin_al1</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2019-01-20T02:58:56Z' class='post-time'>
                    January 20, 2019,  2:58am
                  </time>
                  <meta itemprop='dateModified' content='2019-01-20T02:58:56Z'>
              <span itemprop='position'>2</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p><a class="mention" href="../../u/hartmms.html">@hartmms</a>,</p>
<p>It takes me a while to read messages since I have a new assignment at work, hopefully you are still working on this.</p>
<p>I know there are lots of examples of using TCP or even UDP for particle devices, see <a href="https://community.particle.io">https://community.particle.io</a> to read up on it.</p>
<p>On the computer side, this is not something I have ever tried.  Can you run a virtual machine on your Mac so you could run the canutils on the virtual machine?</p>
<p>If you are looking for CANbus messages for Dodge vehicles, check out the postings here by <a class="mention" href="../../u/dubb45.html">@dubb45</a>.  He even posted a partial list for his 2015 car.   The same codes seem to work for a bunch of different 2015 and 2016 Dodge products, so I would try them out on yours.  His list worked for my 2015 RAM 1500.  I doubt Dodge would change the codes as that would mean a lot of re-engineering.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction">
              <meta itemprop="userInteractionCount" content="0">
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction">
                <meta itemprop="userInteractionCount" content="1">
              </div>

          </div>
          <div id='post_3' itemprop='comment' itemscope="" itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" href='../../u/dubb45.html'><span itemprop='name'>dubb45</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2019-01-20T04:18:55Z' class='post-time'>
                    January 20, 2019,  4:18am
                  </time>
                  <meta itemprop='dateModified' content='2019-01-20T04:18:55Z'>
              <span itemprop='position'>3</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>He can also use a raspberry pi, then install canutils and on the carloop flash the socketcan sketch. Once you have that working you can then install a vnc viewer like “real vnc” and access your pi via the net. I use it like that on my bench setup with a 2016 Dodge Challenger body control module, PCM, shifter, instrument cluster all connected together. I can remotely login and develop code using a custom board I’ve developed and the Arduino IDE. Once I got what I’m looking for I then port over the code to the carloop and try it out. If you have a redbear duo you can install the Arduino IDE and also add support for the redbear duo and can flash locally, just have to add the carloop library and your good to go I’ve used it like that as well no problems. Even developed code remotly logining in using my iPad while on the road not too bad.<br>
You can even take it a step further like I did and have the pi as a mobile car hacking station. If no known internet is available to connect the pi then broadcasts its own hotspot to connect either vnc or ssh (no internet while using the hotspot)</p>
            </div>

            <div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction">
              <meta itemprop="userInteractionCount" content="0">
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction">
                <meta itemprop="userInteractionCount" content="1">
              </div>

          </div>
          <div id='post_4' itemprop='comment' itemscope="" itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" href='../../u/hartmms.html'><span itemprop='name'>hartmms</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2019-01-20T21:33:56Z' class='post-time'>
                    January 20, 2019,  9:33pm
                  </time>
                  <meta itemprop='dateModified' content='2019-01-20T21:33:56Z'>
              <span itemprop='position'>4</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>The ultimate goal is to have remote access to control the door locks and remote start.  Sirius/UConnect is gonna charge me at least $260/year for this, but I figured paying only $3/month (for cell access on an electron) + my custom code would be better.  Eventually I’d like to add a GPS so I can track where my truck is. Perhaps even some sort of location based code that detects when I’m about to pull up in my driveway and open my garage door for me (since I use home-assistant with my house).</p>
<p>Great idea about the raspberry pi and VNC!  Not sure why I didn’t think about that. Sometimes I get stuck on a solution and try to brute force my way through without thinking of a better solution.   I guess CAN over ethernet seemed more elegant to me at the time.  I’m currently spending way too many hours trying to replicate the canutils “cansniffer” code with a pure Python implementation.</p>
<p>An even better solution would be raspberry pi + tmux + mosh. A pure text/terminal solution without all the X junk.  Now I just have to find that raspberry pi 2 I have laying around somewhere.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction">
              <meta itemprop="userInteractionCount" content="0">
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction">
                <meta itemprop="userInteractionCount" content="0">
              </div>

          </div>
          <div id='post_5' itemprop='comment' itemscope="" itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" href='../../u/hartmms.html'><span itemprop='name'>hartmms</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2019-01-20T23:07:15Z' class='post-time'>
                    January 20, 2019, 11:07pm
                  </time>
                  <meta itemprop='dateModified' content='2019-01-20T23:07:15Z'>
              <span itemprop='position'>5</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p><a class="mention" href="../../u/dubb45.html">@dubb45</a> do you have a full list of Dodge challenger codes you know about? I only saw one post by you where you document the steering wheel buttons and shifter data. I was curious if you found the lock/unlock codes.</p>
<p>I finally got my sniffer code working and I have found these out for my 2018 Ram 2500:</p>
<p>VIN:  3e0.<br>
1st byte of data = index of VIN. Cycles through values of 02, 01, 00, with 00 being the start of the string of the VIN string.</p>
<p>clock: 38c.<br>
bytes 4, 5 and 6 seems to be the 24 hour format of UTC hh:mm:ss, respectively.</p>
<p>I’m not sure, but I think 2fa is the door lock and unlock:<br>
unlock: 2fa  00 01 00 1a 00 00 00 00   …<br>
lock: 2fa  40 01 00 02 00 00 00 00   @…</p>
<p>radio volume: 30f.<br>
1st byte is same integer as displayed on screen for volume level</p>
<p>radio mute:  2f3.  1st byte only.<br>
08 = mute<br>
00 = unmute.<br>
also serves as bluetooth and android auto pause/play toggle.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction">
              <meta itemprop="userInteractionCount" content="0">
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope="" itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction">
                <meta itemprop="userInteractionCount" content="0">
              </div>

          </div>
    </div>


  




    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope="" itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='../../index.htm' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope="" itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='/categories' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope="" itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='/guidelines' itemprop="url">FAQ/Guidelines </a>
        </span>
      </li>
        <li itemscope="" itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope="" itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    
    
  </body>
  
</html>
